## JS バンドル可視化と削減候補の洗い出し手順

このプロジェクトには、すでに `@next/bundle-analyzer` が導入されており、`npm run analyze` でクライアントバンドルを可視化できます。

### 1. 分析の実行方法

```bash
npm run analyze
```

- `ANALYZE=true next build` が走り、`.next/analyze/` 以下に treemap が生成されます（ローカル環境でブラウザ表示）。
- 特に `app/page.tsx`（TOP ページ）に紐づくチャンクに注目してください。

### 2. 見るべきポイント

- **TOP ページ初回ロードで読み込まれるチャンク**
  - React/Next 本体以外で大きいチャンク（数十 KB〜）がないか確認。
  - 検索や一覧表示に不要なユーティリティ・ライブラリが含まれていないかチェック。
- **共通チャンク (`commons`, `shared`, `npm.xxx` など)** 
  - TOP ページでは使っていないライブラリがまとめて入っていないか確認。

### 3. 削減・遅延候補の考え方

- TOP ページで使っていないコンポーネントやユーティリティは、`dynamic import` などで遅延ロードする。
- 大きめのライブラリ（例: 重いパーサーやフォーマッタ）があれば、サーバー側に寄せる or 別ページに分離する。
- `app/components` 以下で TOP に不要なものがあれば、エントリから切り離して依存を減らす。

> 実際の削減・分割は、treemap を見ながら個別に判断してください。ここでは「どうやって見るか」「どこを削ると良いか」のガイドのみをまとめています。

